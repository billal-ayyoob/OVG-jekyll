---
layout: default
title: Block Matching (CPU) Controls
---

<div class="page col-full" id="content">

    <section class="fullwidth" id="main">

        <article class="post-797 page type-page status-publish hentry">

            <section class="entry">
                <form action="{{site.baseurl}}/knowledgebase/block-matching-cpu-controls" id="kbsearchform" method="get" role="search">
                    <div class="knowledgebase-search">
                        <input id="s" name="s" type="text" value=""><span><input id="searchsubmit" type="submit"
                                                                                 value="Search"></span><br>
                        <input name="post_type" type="hidden" value="knowledgebase">
                    </div>
                    <p></p></form>
                <article class="knowledgebase-single">
                    <h2><span id="Block_Matching_CPU_Controls">Block Matching (CPU) Controls</span></h2>
                    <div class="knowledgebase-meta">
                        <p>
                            <time class="updated" datetime="2015-03-03T06:13:31+00:00" pubdate="">Last Updated: 5 years
                                ago
                            </time>
                            in&nbsp;<a href="{{site.baseurl}}/kb/indigo-tools/">Indigo Tools</a>,&nbsp;<a
                                href="{{site.baseurl}}/kb/sdk-development/">SDK development</a></p>
                        <p></p></div>
                    <div class="knowledgebase-content">
                        <div class="no_bullets" id="toc_container"><p class="toc_title">Contents</p>
                            <ul class="toc_list">
                                <li><a href="#Block_Matching_CPU_Controls"><span class="toc_number toc_depth_1">1</span>
                                    Block Matching (CPU) Controls</a>
                                    <ul>
                                        <li><a href="#Prefilter_Type"><span class="toc_number toc_depth_2">1.1</span>
                                            Prefilter Type</a></li>
                                        <li><a href="#Prefilter_Size"><span class="toc_number toc_depth_2">1.2</span>
                                            Prefilter Size</a></li>
                                        <li><a href="#Prefilter_Cap"><span class="toc_number toc_depth_2">1.3</span>
                                            Prefilter Cap</a></li>
                                        <li><a href="#SAD_Window_Size"><span class="toc_number toc_depth_2">1.4</span>
                                            SAD Window Size</a></li>
                                        <li><a href="#Number_of_Disparities"><span
                                                class="toc_number toc_depth_2">1.5</span> Number of Disparities</a></li>
                                        <li><a href="#Texture_Threshold"><span class="toc_number toc_depth_2">1.6</span>
                                            Texture Threshold</a></li>
                                        <li><a href="#Uniqueness_Ratio"><span class="toc_number toc_depth_2">1.7</span>
                                            Uniqueness Ratio</a></li>
                                        <li><a href="#Speckle_Range"><span class="toc_number toc_depth_2">1.8</span>
                                            Speckle Range</a></li>
                                        <li><a href="#Speckle_Window_Size"><span
                                                class="toc_number toc_depth_2">1.9</span> Speckle Window Size</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <p></p>
                        <p>Below we review the configuration options&nbsp;for the CPU Block Matching module. The module
                            is enabled for Occam stereo rigs such as Omni Stereo.&nbsp;From Indigo&nbsp;Tools, the
                            control pull-down that&nbsp;appears when clicking&nbsp;<a
                                    href="{{site.baseurl}}/assets/images/knowledgebase/controlicon.png"><img
                                    alt="controlicon"
                                    class="alignnone size-full wp-image-767"
                                    height="41" src="{{site.baseurl}}/assets/images/knowledgebase/controlicon.png" width="41"></a>&nbsp;will include a section for these
                            options when the&nbsp;stereo matcher&nbsp;module is configured to&nbsp;“Block Matching
                            (CPU)”.</p>
                        <p>You can use occamSetDeviceValues(device,OCCAM_STEREO_MATCHER0,”bmcpu”) to enable&nbsp;this
                            module programmatically if it is not already set.</p>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols2.png"><img
                                alt="bmcpucontrols2"
                                class="alignnone size-medium wp-image-779"
                                height="300" sizes="(max-width: 261px) 100vw, 261px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols2-261x300.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols2-261x300.png 261w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols2-222x256.png 222w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols2-217x250.png 217w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols2.png 369w"
                                width="261"></a></p>
                        <p>CPU Block Matching is&nbsp;derived&nbsp;from the OpenCV&nbsp;block matching stereo&nbsp;implementation&nbsp;which
                            performs a very efficient&nbsp;SAD cost minimization using SSE instructions on x86 or native
                            C code on&nbsp;other platforms. On nice i7 laptop&nbsp;hardware,&nbsp;performance of around
                            20 FPS can be&nbsp;achieved computing stereo on all 5 Omni Stereo&nbsp;pairs.</p>
                        <p>For each of the options&nbsp;described below, programmatic control is possible via the
                            OCCAM_* options listed in the corresponding section, by calling occamSetDeviceValuei
                            function.&nbsp;The Indigo Tools&nbsp;application is built on top of the Indigo SDK, so in
                            general anything that is possible to configure with the UI is also possible to&nbsp;do in
                            code&nbsp;using the SDK.</p>
                        <h3><span id="Prefilter_Type">Prefilter Type</span></h3>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols4.png"><img
                                alt="bmcpucontrols4"
                                class="alignnone size-medium wp-image-785"
                                height="130" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols4-300x130.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols4-300x130.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols4-256x111.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols4-250x109.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols4.png 371w"
                                width="300"></a></p>
                        <p>Use occamSetDeviceValuei(device,OCCAM_BM_PREFILTER_TYPE,VALUE) to change this setting, with
                            the value one of:</p>
                        <p>OCCAM_PREFILTER_NONE = 0<br>
                            OCCAM_PREFILTER_XSOBEL = 1<br>
                            OCCAM_PREFILTER_NORMALIZED_RESPONSE = 2</p>
                        <h3><span id="Prefilter_Size">Prefilter Size</span></h3>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols5.png"><img
                                alt="bmcpucontrols5"
                                class="alignnone size-medium wp-image-786"
                                height="85" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols5-300x85.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols5-300x85.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols5-256x72.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols5-250x71.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols5.png 373w"
                                width="300"></a></p>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_PREFILTER_SIZE,VALUE) to change this&nbsp;setting.</p>
                        <h3><span id="Prefilter_Cap">Prefilter Cap</span></h3>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols6.png"><img
                                alt="bmcpucontrols6"
                                class="alignnone size-medium wp-image-787"
                                height="82" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols6-300x82.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols6-300x82.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols6-256x70.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols6-250x68.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols6.png 372w"
                                width="300"></a></p>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_PREFILTER_CAP,VALUE) to change this
                            setting.</p>
                        <h3><span id="SAD_Window_Size">SAD Window Size</span></h3>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols7.png"><img
                                alt="bmcpucontrols7"
                                class="alignnone size-medium wp-image-788"
                                height="215" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols7-300x215.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols7-300x215.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols7-256x183.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols7-250x179.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols7.png 373w"
                                width="300"></a></p>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_SAD_WINDOW_SIZE,VALUE) to change this
                            setting.</p>
                        <h3><span id="Number_of_Disparities">Number of Disparities</span></h3>
                        <h3><img alt="bmcpucontrols3"
                                 class="alignnone size-medium wp-image-784"
                                 height="220" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols3-300x220.png"
                                 srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols3-300x220.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols3-256x188.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols3-250x183.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols3.png 373w"
                                 width="300"></h3>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_NUM_DISPARITIES,VALUE) to change this
                            setting.</p>
                        <h3><span id="Texture_Threshold">Texture Threshold</span></h3>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols8.png"><img
                                alt="bmcpucontrols8"
                                class="alignnone size-medium wp-image-790"
                                height="79" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols8-300x79.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols8-300x79.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols8-256x67.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols8-250x66.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols8.png 375w"
                                width="300"></a></p>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_TEXTURE_THRESHOLD,VALUE) to change this
                            setting.</p>
                        <h3><span id="Uniqueness_Ratio">Uniqueness Ratio</span></h3>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols9.png"><img
                                alt="bmcpucontrols9"
                                class="alignnone size-medium wp-image-791"
                                height="81" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols9-300x81.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols9-300x81.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols9-256x69.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols9-250x68.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols9.png 371w"
                                width="300"></a></p>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_UNIQUENESS_RATIO,VALUE) to change this
                            setting.</p>
                        <h3><span id="Speckle_Range">Speckle Range</span></h3>
                        <p><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols10.png"><img
                                alt="bmcpucontrols10"
                                class="alignnone size-medium wp-image-792"
                                height="83" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols10-300x83.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols10-300x83.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols10-256x71.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols10-250x69.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols10.png 374w"
                                width="300"></a></p>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_SPECKLE_RANGE,VALUE) to change this
                            setting.</p>
                        <h3><span id="Speckle_Window_Size">Speckle Window Size</span></h3>
                        <h3><a href="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols111.png"><img
                                alt="bmcpucontrols11"
                                class="alignnone size-medium wp-image-794"
                                height="81" sizes="(max-width: 300px) 100vw, 300px" src="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols111-300x81.png"
                                srcset="{{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols111-300x81.png 300w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols111-256x69.png 256w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols111-250x67.png 250w, {{site.baseurl}}/assets/images/knowledgebase/bmcpucontrols111.png 373w"
                                width="300"></a></h3>
                        <p>Use&nbsp;occamSetDeviceValuei(device,OCCAM_BM_SPECKLE_WINDOW_SIZE,VALUE) to&nbsp;change this
                            setting.</p>
                        <p>&nbsp;</p>
                        <p></p></div>
                </article>
            </section><!-- /.entry -->

        </article><!-- /.post -->

    </section><!-- /#main -->

</div>